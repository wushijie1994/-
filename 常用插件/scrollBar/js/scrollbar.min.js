+function(a,b){
/**
 * @author wuwg
 * @version 2016.0.1
 * @description file
 * @createTime 2016/6/30
 * @updateTime 2016/9/20
 * @descrition  兼容ie7
 * @update  更新top设置为0时，内容出现负数的bug
 * @updateTime 2016/10/11
 * @update
 *问题修复：
 * 	1.解决因为内容变少之前，有滚动条，并且滚动条已经滚动到了其他位置（非0的位置），
 *   当更新的内容小于可视高度时，滚动条会隐藏，但是在此之前，内容已经被滚动过，这时top值无法还原的问题
 *功能增加：
 *  1.滚动后执行了回调函数功能，用户可以在执行完滚动后为其执行一个回调函数
 *  2.增加隐藏滚动条设置
 *  3.增加水平滚动条功能
  * @updateTime 2016/10/11
 *  @update
  *  1. 增加调用update后的回调函数
 */

(function(c){if(typeof define==="function"&&define.amd){define(["jquery"],c)}else{if(typeof exports==="object"){module.exports=c}else{c(jQuery)}}}(function(e){var f=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],m=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],k=Array.prototype.slice,l,d;if(e.event.fixHooks){for(var g=f.length;g;){e.event.fixHooks[f[--g]]=e.event.mouseHooks}}var h=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var o=m.length;o;){this.addEventListener(m[--o],n,false)}}else{this.onmousewheel=n}e.data(this,"mousewheel-line-height",h.getLineHeight(this));e.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var o=m.length;o;){this.removeEventListener(m[--o],n,false)}}else{this.onmousewheel=null}e.removeData(this,"mousewheel-line-height");e.removeData(this,"mousewheel-page-height")},getLineHeight:function(o){var i=e(o),p=i["offsetParent" in e.fn?"offsetParent":"parent"]();if(!p.length){p=e("body")}return parseInt(p.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(i){return e(i).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};e.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function n(i){var q=i||a.event,w=k.call(arguments,1),y=0,s=0,r=0,v=0,u=0,t=0;i=e.event.fix(q);i.type="mousewheel";if("detail" in q){r=q.detail*-1}if("wheelDelta" in q){r=q.wheelDelta}if("wheelDeltaY" in q){r=q.wheelDeltaY}if("wheelDeltaX" in q){s=q.wheelDeltaX*-1}if("axis" in q&&q.axis===q.HORIZONTAL_AXIS){s=r*-1;r=0}y=r===0?s:r;if("deltaY" in q){r=q.deltaY*-1;y=r}if("deltaX" in q){s=q.deltaX;if(r===0){y=s*-1}}if(r===0&&s===0){return}if(q.deltaMode===1){var x=e.data(this,"mousewheel-line-height");y*=x;r*=x;s*=x}else{if(q.deltaMode===2){var p=e.data(this,"mousewheel-page-height");y*=p;r*=p;s*=p}}v=Math.max(Math.abs(r),Math.abs(s));if(!d||v<d){d=v;if(c(q,v)){d/=40}}if(c(q,v)){y/=40;s/=40;r/=40}y=Math[y>=1?"floor":"ceil"](y/d);s=Math[s>=1?"floor":"ceil"](s/d);r=Math[r>=1?"floor":"ceil"](r/d);if(h.settings.normalizeOffset&&this.getBoundingClientRect){var o=this.getBoundingClientRect();u=i.clientX-o.left;t=i.clientY-o.top}i.deltaX=s;i.deltaY=r;i.deltaFactor=d;i.offsetX=u;i.offsetY=t;i.deltaMode=0;w.unshift(i,y,s,r);if(l){clearTimeout(l)}l=setTimeout(j,200);return(e.event.dispatch||e.event.handle).apply(this,w)}function j(){d=null}function c(o,i){return h.settings.adjustOldDeltas&&o.type==="mousewheel"&&i%120===0}}))}(window,jQuery);+function(a,b){b.fn.addScrollBar=function(e){var c={};c._this=b(this);var d={version:"16.7.3",author:"wuwg",creatTime:"2016-07-06",updateTime:"2016-10-11",hasScrollBar:true,direction:"vertical",scrollContentContainClass:"fd-scroll-content",scrollBarContainClass:"fd-scroll-track",scrollBarClass:"fd-scroll-bar",pressClass:"pressed",scrollBarMinHeight:5,scrollBarMinWidth:50,scrollStep:10,scrollTweenTime:10,hideScrollBar:true,callback:null};c.opts=b.fn.extend(true,d,e||{});c.scrollBar={range:function(g,f,h){return Math.ceil(Math.min(f,Math.max(g,h)))},stopBubble:function(f){f.stopPropagation();f.preventDefault()},createScrollBar:function(){var f=b('<div  class="'+c.opts.scrollBarContainClass+'"><span class="'+c.opts.scrollBarClass+'"></span></div>');if(c.opts.hideScrollBar){f.css({opacity:0})}f.appendTo(c.scrollBar.parentContain);c.scrollBar.trackContain=c.scrollBar.parentContain.children("."+c.opts.scrollBarContainClass);c.scrollBar.bar=c.scrollBar.trackContain.find("."+c.opts.scrollBarClass)},getParams:function(){if(c.opts.direction=="vertical"){c.scrollBar.offsetHeight=c.scrollBar.parentContain.height();c.scrollBar.scrollHeight=c.scrollBar.contentContain.innerHeight();c.scrollBar.trackContainHeight=c.scrollBar.trackContain.innerHeight();var g=c.scrollBar.offsetHeight/c.scrollBar.scrollHeight*c.scrollBar.trackContainHeight;c.scrollBar.barHeight=Math.max(c.opts.scrollBarMinHeight,g);c.scrollBar.scrollMinDistance=0;c.scrollBar.scrollMaxDistance=c.scrollBar.trackContainHeight-c.scrollBar.barHeight;c.scrollBar.scrollAreaHeight=c.scrollBar.trackContainHeight-c.scrollBar.barHeight;c.scrollBar.bar.height(c.scrollBar.barHeight);if(c.scrollBar.offsetHeight>c.scrollBar.scrollHeight){c.scrollBar.trackContain.css({display:"none"});c.scrollBar.contentContain.css({top:0});c.scrollBar.bar.css({top:0});return false}else{c.scrollBar.trackContain.css({display:"block"});return true}}else{c.scrollBar.offsetWidth=c.scrollBar.parentContain.width();c.scrollBar.scrollWidth=c.scrollBar.contentContain.innerWidth();c.scrollBar.trackContainWidth=c.scrollBar.trackContain.innerWidth();var f=c.scrollBar.offsetWidth/c.scrollBar.scrollWidth*c.scrollBar.trackContainWidth;c.scrollBar.barWidth=Math.max(c.opts.scrollBarMinWidth,f);c.scrollBar.scrollMinDistance=0;c.scrollBar.scrollMaxDistance=c.scrollBar.trackContainWidth-c.scrollBar.barWidth;c.scrollBar.scrollAreaWidth=c.scrollBar.trackContainWidth-c.scrollBar.barWidth;c.scrollBar.bar.width(c.scrollBar.barWidth);if(c.scrollBar.offsetWidth>c.scrollBar.scrollWidth){c.scrollBar.trackContain.css({display:"none"});c.scrollBar.contentContain.css({left:0});c.scrollBar.bar.css({left:0});return false}else{c.scrollBar.trackContain.css({display:"block"});return true}}},update:function(f,i,j){var m=c.scrollBar.getParams();if(m){if(c.opts.direction=="vertical"){if(b.type(i)=="number"){var k=i}else{var k=!parseInt(c.scrollBar.contentContain.css("top"))?0:parseInt(c.scrollBar.contentContain.css("top"))}k=Math.abs(k);if((c.scrollBar.scrollHeight-k)<c.scrollBar.offsetHeight){k=c.scrollBar.scrollHeight-c.scrollBar.offsetHeight}var l=k/(c.scrollBar.scrollHeight-c.scrollBar.offsetHeight);var g=b.type(f)=="number"?f:c.opts.scrollTweenTime;c.scrollBar.bar.stop(true,true).animate({top:c.scrollBar.scrollAreaHeight*l},g,function(){if(b.type(c.opts.callback)=="function"){c.opts.callback()}if(b.type(j)=="function"){j()}});c.scrollBar.contentContain.stop(true,true).animate({top:-k},g)}else{if(b.type(i)=="number"){var h=i}else{var h=!parseInt(c.scrollBar.contentContain.css("left"))?0:parseInt(c.scrollBar.contentContain.css("left"))}h=Math.abs(h);if((c.scrollBar.scrollWidth-h)<c.scrollBar.offsetWidth){k=c.scrollBar.scrollWidth-c.scrollBar.offsetWidth}var l=h/(c.scrollBar.scrollWidth-c.scrollBar.offsetWidth);var g=b.type(f)=="number"?f:c.opts.scrollTweenTime;c.scrollBar.bar.stop(true,true).animate({left:c.scrollBar.scrollAreaWidth*l},g,function(){if(b.type(c.opts.callback)=="function"){c.opts.callback()}if(b.type(j)=="function"){j()}});c.scrollBar.contentContain.stop(true,true).animate({left:-h},g)}}},moveFunction:function(l){var h=c.scrollBar.draging?0:c.opts.scrollTweenTime;if(c.opts.direction=="vertical"){var f=parseInt(c.scrollBar.bar.css("top"))==""?0:parseInt(c.scrollBar.bar.css("top"));f+=Number(l);var g=c.scrollBar.range(f,c.scrollBar.scrollMaxDistance,c.scrollBar.scrollMinDistance);var k=g/c.scrollBar.scrollAreaHeight;if(c.scrollBar.bar.is(":animated")||c.scrollBar.contentContain.is(":animated")){return}else{c.scrollBar.bar.stop(true,true).animate({top:g},h,function(){if(b.type(c.opts.callback)=="function"){c.opts.callback()}});c.scrollBar.contentContain.stop(true,true).animate({top:-Math.round((c.scrollBar.scrollHeight-c.scrollBar.offsetHeight)*k)},h)}}else{var i=parseInt(c.scrollBar.bar.css("left"))==""?0:parseInt(c.scrollBar.bar.css("left"));i+=Number(l);var j=c.scrollBar.range(i,c.scrollBar.scrollMaxDistance,c.scrollBar.scrollMinDistance);var k=j/c.scrollBar.scrollAreaWidth;if(c.scrollBar.bar.is(":animated")||c.scrollBar.contentContain.is(":animated")){return}else{c.scrollBar.bar.stop(true,true).animate({left:j},h,function(){if(b.type(c.opts.callback)=="function"){c.opts.callback()}});c.scrollBar.contentContain.stop(true,true).animate({left:-Math.round((c.scrollBar.scrollWidth-c.scrollBar.offsetWidth)*k)},h)}}},mousewheel:function(g){var g=c.scrollBar.getEvent(g);c.scrollBar.stopBubble(g);if(c.opts.direction=="vertical"){if(c.scrollBar.scrollHeight<c.scrollBar.offsetHeight){return}}else{if(c.scrollBar.scrollWidth<c.scrollBar.offsetWidth){return}}var h=g.deltaY,f=0;switch(h){case 1:f=c.opts.scrollStep*(-1);c.scrollBar.moveFunction(f);break;case -1:f=c.opts.scrollStep;c.scrollBar.moveFunction(f);break;default:break}},getEvent:function(f){var f=f||a.event;return f},draging:false,mousedown:function(j){var j=c.scrollBar.getEvent(j);var h=b(this);c.scrollBar.draging=true;var i=c.opts.direction=="vertical"?j.pageY:j.pageX,f=0,g=0;h.addClass(c.opts.pressClass);b(a).on("mousemove.scrollBar",function(k){var k=c.scrollBar.getEvent(k);c.scrollBar.stopBubble(k);g=c.opts.direction=="vertical"?k.pageY:k.pageX;f=g-i;i=g;c.scrollBar.moveFunction(f)}).on("mouseup.scrollBar",function(){b(a).off("mousemove.scrollBar");b(a).off("mouseup.scrollBar");c.scrollBar.draging=false;h.removeClass(c.opts.pressClass)})},resize:function(){c.scrollBar.update(20)},bindEvent:function(){c.scrollBar.parentContain.off("mousewheel.scrollBar").on("mousewheel.scrollBar",c.scrollBar.mousewheel);c.scrollBar.parentContain.off("mousedown.scrollBar").on("mousedown.scrollBar","."+c.opts.scrollBarClass,c.scrollBar.mousedown);b(a).off("resize.scrollBar").on("resize.scrollBar",c.scrollBar.resize);if(c.opts.hideScrollBar){c.scrollBar.parentContain.off("mouseenter.scrollBar").on("mouseenter.scrollBar",function(){c.scrollBar.trackContain.stop(true,true).animate({opacity:1},400)});c.scrollBar.parentContain.off("mouseleave.scrollBar").on("mouseleave.scrollBar",function(){c.scrollBar.trackContain.stop(true,true).animate({opacity:0},400)})}},unbindEvent:function(){c.scrollBar.parentContain.off("mousewheel.scrollBar",c.scrollBar.mousewheel);c.scrollBar.parentContain.off("mousedown.scrollBar","."+c.opts.scrollBarClass,c.scrollBar.mousedown);b(a).off("resize.scrollBar");c.scrollBar.parentContain.off("mouseenter.scrollBar").off("mouseleave.scrollBar")},init:function(){c.scrollBar.parentContain=c._this;c.scrollBar.parentContain.css({overflow:"hidden"});c.scrollBar.contentContain=c.scrollBar.parentContain.children("."+c.opts.scrollContentContainClass);c.scrollBar.createScrollBar();c.scrollBar.getParams();c.scrollBar.bindEvent()},destory:function(){c.scrollBar.unbindEvent();c.scrollBar.trackContain.remove()}};if(c.opts.hasScrollBar){c.scrollBar.init()}return c}}(window,jQuery);
